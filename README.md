# JustPay-Server

<img alth="justpay" src="https://user-images.githubusercontent.com/67372977/210496340-6bb69f5d-1834-480f-8040-6d42f6d5fa28.png" width="300px" height="300px"/>
</br>

## â­ï¸ì„œë¹„ìŠ¤ í•œ ì¤„ ì†Œê°œ
íŠ¸ìœ„í„° DM ì—†ëŠ” ì•„ì´ëŒ êµ¿ì¦ˆ ìµœê³ ê°€ ë§¤ì¹­ ì„œë¹„ìŠ¤

</br>

## â­ï¸ì„œë¹„ìŠ¤ í•µì‹¬ê¸°ëŠ¥ ì†Œê°œ
1ï¸âƒ£</br>
í¬í† ì¹´ë“œë¥¼ ì‰½ê²Œ íŒë§¤í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” íŒë§¤ì˜µì…˜ì´ í•œëˆˆì— ë³´ì´ëŠ” íŒë§¤ê¸€ í”¼ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.</br>
íŒë§¤ìì˜ ì‹ ë¢°ë„ë¥¼ ë†’ì—¬ì£¼ëŠ” 3ê°€ì§€ PAYì •ë³´ë„ í•¨ê»˜ ì œê³µë©ë‹ˆë‹¤.</br>
<img width="200" alt="3 1 1 íŒë§¤ì¤‘ GNB" src="https://user-images.githubusercontent.com/67372977/211900938-2fd0b7b3-2f07-4829-84f1-6cc33d7238f4.png"></br></br>
2ï¸âƒ£</br>
íŠ¸ìœ„í„°DM ì„ ì¼ì¼ì´ í™•ì¸í•  í•„ìš” ì—†ì´ êµ¬ë§¤ìë“¤ì˜ ì œì‹œ ì˜µì…˜ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆëŠ” ë§¤ì¹­ ì¤‘ ëª©ë¡ì„ ì œê³µí•©ë‹ˆë‹¤.</br>
<img width="200" alt="4 1 íŒë§¤ì¤‘ GNB - íŒë§¤ì¤‘ ë¦¬ìŠ¤íŠ¸" src="https://user-images.githubusercontent.com/67372977/211901330-e2624a83-b2dd-439a-9324-9f2cc7aa8d9e.png"></br></br>
3ï¸âƒ£</br>
íŒë§¤ê¸€ì„ ì˜¬ë¦¬ê³ , íŒë§¤ê¸€ì— êµ¬ë§¤ ì œì‹œë¥¼ í•˜ì—¬ ì‰½ê³  ì•ˆì „í•œ ê±°ë˜ë¥¼ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.</br>
<img width="200" alt="8 3 2 2ê°œì¼ë¶€+ì œì‹œê°€ê²©" src="https://user-images.githubusercontent.com/67372977/211901599-96611bdd-988d-41c7-b322-03c83dc63046.png">
<img width="200" alt="íŒë§¤ê¸€ ì‘ì„± - ëŒ€í‘œì‚¬ì§„ ë“±ë¡í›„ -ì¼ë¶€ íŒë§¤" src="https://user-images.githubusercontent.com/67372977/211901613-82f57e8e-db4a-4287-bd78-953a327f0690.png"></br>

</br>

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ R&R(ì—­í• ë¶„ë‹´)

| ì—­í•  | ë‹´ë‹¹ì |
| --- | --- |
| í˜‘ì—… íˆ´ ê´€ë¦¬ | ì „í¬ì„  |
| ê³¼ì œ ì œì¶œ ë‹´ë‹¹ | ì²œí˜¸ì˜ |
| ê³¼ì œ ê´€ë¦¬ ë‹´ë‹¹ | ì „í¬ì„  |
| ë°ì¼ë¦¬ ìŠ¤í¬ëŸ¼ ì—…ë¡œë“œ/ë¦¬ë§ˆì¸ë“œ | ì²œí˜¸ì˜ |
| ì „ì²´ ì¼ì • ê´€ë¦¬ | ì²œí˜¸ì˜ ì „í¬ì„  |
| íšŒì˜ë¡ ì‘ì„± | ì²œí˜¸ì˜ |
| ê¸°ìˆ  / ì½”ë“œê´€ë¦¬ / ì½”ë“œë¦¬ë·° | ì²œí˜¸ì˜ ì „í¬ì„  |
| Read Me ì‘ì„± | ì²œí˜¸ì˜ ì „í¬ì„  |

</br>

## âœï¸ DB ERD
<img width="1481" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-01-04 á„‹á…©á„’á…® 3 57 17" src="https://user-images.githubusercontent.com/67372977/210506846-e9329f15-7ed5-4a8c-a5b1-594ef4aa4f58.png">


## ğŸ“• Cloud Service
<img alt="Amazon AWS" src ="https://img.shields.io/badge/Amazon AWS-232F3E.svg?&style=for-the-badge&logo=Amazon AWS&logoColor=white"/>

- AWS EC2 - í´ë¼ìš°ë“œ ì»´í“¨íŒ… ì‹œìŠ¤í…œ
- AWS RDS - í´ë¼ìš°ë“œ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤
- AWS S3 - í´ë¼ìš°ë“œ ë°ì´í„° ì €ì¥ì†Œ
- AWS Route 53 - í´ë¼ìš°ë“œ DNS ì›¹ ì„œë¹„ìŠ¤

## ğŸ“š ê¸°ìˆ  ìŠ¤íƒ
<img alt="Node.js" src ="https://img.shields.io/badge/Node.js-339933.svg?&style=for-the-badge&logo=Node.js&logoColor=white"/>  <img alt="Express" src ="https://img.shields.io/badge/Express-000000.svg?&style=for-the-badge&logo=Express&logoColor=white"/>
<img alt="npm" src ="https://img.shields.io/badge/prisma-2D3748.svg?&style=for-the-badge&logo=prisma&logoColor=white"/>
<img alt="PostgreSQL" src ="https://img.shields.io/badge/PostgreSQL-4169E1.svg?&style=for-the-badge&logo=PostgreSQL&logoColor=white"/>

- Node.js
- Express.js
- Prisma
- PostgreSQL

## âš’ Server Architecture
![ì•„í‚¤í…ì³](https://user-images.githubusercontent.com/67372977/211884274-fcc50312-bc4b-45b6-bdd6-e4f713cfb9ce.jpg)


## ğŸ”” Dependencies
```
"dependencies": {
    "@aws-sdk/client-s3": "^3.216.0",
    "@prisma/client": "^4.5.0",
    "axios": "^1.2.2",
    "bcryptjs": "^2.4.3",
    "cors": "^2.8.5",
    "dotenv": "^16.0.3",
    "express": "^4.18.2",
    "express-validator": "^6.14.2",
    "jsonwebtoken": "^8.5.1",
    "multer": "^1.4.5-lts.1",
    "multer-s3": "^3.0.1",
    "prisma": "^4.5.0"
  },
  "devDependencies": {
    "@babel/core": "^7.20.12",
    "@babel/preset-env": "^7.20.2",
    "@babel/preset-typescript": "^7.18.6",
    "@types/bcryptjs": "^2.4.2",
    "@types/express": "^4.17.14",
    "@types/express-validator": "^3.0.0",
    "@types/jest": "^29.2.5",
    "@types/jsonwebtoken": "^9.0.0",
    "@types/multer": "^1.4.7",
    "@types/multer-s3": "^3.0.0",
    "@types/node": "^18.11.9",
    "@types/supertest": "^2.0.12",
    "@typescript-eslint/eslint-plugin": "^5.47.1",
    "@typescript-eslint/parser": "^5.47.1",
    "babel-jest": "^29.3.1",
    "eslint": "^8.30.0",
    "eslint-config-prettier": "^8.5.0",
    "eslint-plugin-import": "^2.26.0",
    "eslint-plugin-node": "^11.1.0",
    "eslint-plugin-prettier": "^4.2.1",
    "husky": "^8.0.0",
    "jest": "^29.3.1",
    "jest-mock-extended": "^3.0.1",
    "nodemon": "^2.0.20",
    "prettier": "^2.8.1",
    "supertest": "^6.3.3",
    "ts-jest": "^29.0.3",
    "typescript": "^4.9.4"
  }
```

## ğŸ•¸ API DOCS

â†—ï¸ [API ëª…ì„¸ì„œ](https://eunbigombi.notion.site/API-Docs-e5893577fcf54f84a3d4cdf634d9a636)

</br>


## âœï¸ ë‹´ë‹¹ ê¸°ëŠ¥ ë° Progess Status

ì´ˆê¸° ì„¸íŒ… ë° 

| ê¸°ëŠ¥ | ë‹´ë‹¹ì | ì™„ë£Œ |
| --- | --- | --- |
| AWS ì„¸íŒ… | ì²œí˜¸ì˜ | âœ… |
| ë°°í¬ ë° HTTPS ì‘ì—… | ì²œí˜¸ì˜ ì „í¬ì„  | âœ… |
| ê¹ƒí—™ í˜‘ì—… ê¸°ë°˜ ì„¸íŒ… |  ì „í¬ì„  | âœ… |
| í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¸íŒ… | ì²œí˜¸ì˜ ì „í¬ì„  | âœ… |
| ERD êµ¬ì„± | ì²œí˜¸ì˜ ì „í¬ì„  | âœ… |
| DB migration | ì²œí˜¸ì˜ | âœ… |
| APIëª…ì„¸ ì‘ì„± | ì²œí˜¸ì˜ ì „í¬ì„  | âœ… |

API

| ê¸°ëŠ¥ | ë‹´ë‹¹ì | ì™„ë£Œ |
| --- | --- | --- |
| ë‚´ ì •ë³´ ì¡°íšŒ | ì²œí˜¸ì˜ | âœ… |
| ë‚´ ì •ë³´ ìˆ˜ì • | ì²œí˜¸ì˜ | âœ… |
| í”„ë¡œí•„ ì •ë³´ ì¡°íšŒ(ë‚´ê°€ ì•„ë‹Œ) | ì²œí˜¸ì˜ | âœ… |
| ë‚´ ì•Œë¦¬ë¯¸ ì¡°íšŒ | ì „í¬ì„  | âœ… |
| ë‚´ êµ¬ë§¤ì¤‘ ì •ë³´ ì¡°íšŒ (êµ¬ë§¤ì¤‘/êµ¬ë§¤ì™„ë£Œ) | ì „í¬ì„  | âœ… |
| ë‚´ íŒë§¤ì¤‘ ì •ë³´ ì¡°íšŒ (íŒë§¤ì¤‘/íŒë§¤ì¢…ë£Œ) | ì²œí˜¸ì˜ | âœ… |
| íŒë§¤ê¸€ ë“±ë¡ | ì²œí˜¸ì˜ | âœ… |
| íŒë§¤ê¸€ ì •ë³´ ì¡°íšŒ | ì²œí˜¸ì˜ | âœ… |
| íŒë§¤ê¸€ êµ¬ë§¤ ì œì‹œ ëª©ë¡ | ì „í¬ì„  | âœ… |
| êµ¬ë§¤ ì œì‹œí•˜ê¸° | ì „í¬ì„  | âœ… |
| íŒë§¤ê¸€ ìƒíƒœ ë³€ê²½ | ì²œí˜¸ì˜ | âœ… |
| ì¸ì¦ì‚¬ì§„ ì¡°íšŒ | ì²œí˜¸ì˜ | âœ… |
| êµ¬ë§¤ ì œì‹œ ë‚´ìš© ì¡°íšŒ | ì „í¬ì„  | âœ… |
| êµ¬ë§¤ ì œì‹œ ì‚­ì œ | ì „í¬ì„  | âœ… |
| êµ¬ë§¤ ì œì‹œ ìƒíƒœë³€ê²½ | ì „í¬ì„  | âœ… |
| êµ¬ë§¤ ì œì‹œ ê°€ê²© ì˜¬ë¦¬ê¸° | ì „í¬ì„  | âœ… |
| ìš´ì†¡ì¥ ì •ë³´ ì…ë ¥ | ì „í¬ì„  | âœ… |
| ì„ì‹œ ì†Œì…œ ë¡œê·¸ì¸ | ì²œí˜¸ì˜ | âœ… |
| ìš´ì†¡ì¥ ì •ë³´ í™•ì¸ | ì „í¬ì„  | âœ… |
| ë°°ì†¡ ì •ë³´ í™•ì¸ | ì²œí˜¸ì˜ | âœ… |
| ê²°ì œ ì •ë³´ ì¡°íšŒ | ì²œí˜¸ì˜ | âœ… |
| ì¸ì¦ì½”ë“œ ìƒì„± | ì „í¬ì„  | âœ… |


</br>


## â™Ÿ commit, coding convention, branch ì „ëµ

### ğŸ“ Commit Convention

- init: ë”°ë‹¨~~ ì²« ì»¤ë°‹
- feat: ìƒˆë¡œìš´ ê¸°ëŠ¥, UI êµ¬í˜„
- fix: ë²„ê·¸ ìˆ˜ì •,ë¦¬í¬íŠ¸
- docs: readme ë“±ì˜ ë¬¸ì„œ ìˆ˜ì •
- edit: íŒŒì¼ ì‚­ì œ ë° ìˆ˜ì •, ì´ë™
- del: ì“¸ëª¨ì—†ëŠ” ì½”ë“œ ì‚­ì œ
- chore: ê¸°ëŠ¥ìƒ ë³€ê²½ ì—†ëŠ” ì½”ë“œ ìˆ˜ì •, íŒ¨í‚¤ì§€ ê´€ë¦¬ ë“±
- refactor: ì™„ì„±ëœ ê¸°ëŠ¥ êµ¬ì¡° ë³€ê²½, ë¦¬íŒ©í† ë§ 


### ğŸ“ coding convention

- .eslintrc.json

```
    {
        "env": {
          "es2021": true,
          "node": true,
          "jest": true
        },
        "extends": [
          "eslint:recommended",
          "plugin:@typescript-eslint/eslint-recommended",
          "plugin:@typescript-eslint/recommended",
          "plugin:prettier/recommended",
          "prettier/prettier",
          "plugin:import/recommended"
        ],
        "parser": "@typescript-eslint/parser",
        "parserOptions": {
          "project": ["./tsconfig.json", "./jest.config.js"],
          "ecmaVersion": "latest",
          "sourceType": "module"
        },
        "plugins": ["@typescript-eslint", "prettier"],
        "rules": {
          "camelcase": "error",
          "comma-dangle": ["error", "always-multiline"],
          "no-console": ["warn"],
          "@typescript-eslint/no-var-requires": "off",
          "no-constant-condition": ["error", { "checkLoops": true }],
          "no-restricted-syntax": [
            "error",
            {
              "selector": "LabeledStatement",
              "message": "Labels are a form of GOTO; using them makes code confusing and hard to maintain and understand."
            },
            {
              "selector": "WithStatement",
              "message": "`with` is disallowed in strict mode because it makes code impossible to predict and optimize."
            }
          ],
          "no-use-before-define": ["off", { "functions": false }],
          "no-unused-expressions": ["error", { "allowTaggedTemplates": true }],
          "prefer-const": [
            "error",
            { "destructuring": "all" }
          ],
          "prefer-destructuring": ["error", { "array": false, "object": false }, { "enforceForRenamedProperties": true }],
          "spaced-comment": ["error", "always"],
          "import/extensions": ["error", "never"],
          "import/no-unresolved": "off",
          "import/order": [
            "error",
            {
              "groups": [
                "builtin",
                "external",
                "internal",
                "parent",
                "sibling"
              ],
              "newlines-between": "always",
              "alphabetize": {
                "order": "asc",
                "caseInsensitive": false
              }
            }
          ],
          "import/prefer-default-export": "off"
        },
        "ignorePatterns": ["dist/", "node_modules/", "jest.config.js", "babel.config.js", "__test__"]
      }
```

- .prettierrc

```
{
  "singleQuote": true,
  "semi": true,
  "tabWidth": 2,
  "trailingComma": "all",
  "printWidth": 100,
  "endOfLine": "auto"
}
```

### ğŸ“ Branch ì „ëµ

- ë°°í¬ ë¸Œëœì¹˜ : `main`
- ê°œë°œ ë¸Œëœì¹˜ : `develop`
- pr ë‹¨ìœ„ ë¸Œëœì¹˜ + ë’¤ì— ì´ìŠˆ ë²ˆí˜¸ ë¶™ì´ê¸°
    - `feature/`
    - `fix/`
    - `refact/`
    - `hotfix/`


### ğŸ“ PR, ì´ìŠˆ ê´€ë¦¬

ğŸ’¡ í•˜ë‚˜ì˜ ì´ìŠˆë¥¼ ì˜¬ë¦¬ë©´ ì´ìŠˆ ë‹¨ìœ„ë¡œ pr ë‚ ë¦¬ê¸°<br>
ğŸ’¡ ì½”ë“œë¦¬ë·° í›„ merge í•˜ê¸°


## ğŸ› í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°

```
__test__
prisma
src
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ s3Config.ts
â”œâ”€â”€ constants
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ notification.ts
â”‚   â”œâ”€â”€ response.ts
â”‚   â”œâ”€â”€ responseMessage.ts
â”‚   â”œâ”€â”€ shippingInfo.ts
â”‚   â”œâ”€â”€ statusCode.ts
â”‚   â”œâ”€â”€ tokenType.ts
â”‚   â””â”€â”€ wordList.ts
â”œâ”€â”€ controller
â”‚   â”œâ”€â”€ authController.ts
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ salespostController.ts
â”‚   â”œâ”€â”€ suggestController.ts
â”‚   â””â”€â”€ userController.ts
â”œâ”€â”€ db
â”‚   â”œâ”€â”€ client.ts
â”‚   â””â”€â”€ data.ts
â”œâ”€â”€ index.ts
â”œâ”€â”€ interfaces
â”‚   â”œâ”€â”€ image
â”‚   â”‚   â””â”€â”€ imageCreateResponseDTO.ts
â”‚   â”œâ”€â”€ salespost
â”‚   â”‚   â”œâ”€â”€ createSalespostDTO.ts
â”‚   â”‚   â”œâ”€â”€ getPurchaseListDTO.ts
â”‚   â”‚   â””â”€â”€ suggestCreateDTO.ts
â”‚   â”œâ”€â”€ type
â”‚   â”‚   â””â”€â”€ shippingInfo.ts
â”‚   â””â”€â”€ user
â”‚       â””â”€â”€ userUpdateDTO.ts
â”œâ”€â”€ middlewares
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ upload.ts
â”œâ”€â”€ modules
â”‚   â”œâ”€â”€ date.ts
â”‚   â”œâ”€â”€ dateNotification.ts
â”‚   â”œâ”€â”€ jwtHandler.ts
â”‚   â”œâ”€â”€ notification.ts
â”‚   â”œâ”€â”€ shippingOption.ts
â”‚   â”œâ”€â”€ slack.ts
â”‚   â””â”€â”€ testModule.ts
â”œâ”€â”€ router
â”‚   â”œâ”€â”€ authRouter.ts
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ salespostRouter.ts
â”‚   â”œâ”€â”€ suggestRouter.ts
â”‚   â””â”€â”€ userRouter.ts
â”œâ”€â”€ server.ts
â”œâ”€â”€ service
â”‚   â”œâ”€â”€ authService.ts
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ salespostService.ts
â”‚   â”œâ”€â”€ suggestService.ts
â”‚   â””â”€â”€ userService.ts
â””â”€â”€ singleton.ts
```
